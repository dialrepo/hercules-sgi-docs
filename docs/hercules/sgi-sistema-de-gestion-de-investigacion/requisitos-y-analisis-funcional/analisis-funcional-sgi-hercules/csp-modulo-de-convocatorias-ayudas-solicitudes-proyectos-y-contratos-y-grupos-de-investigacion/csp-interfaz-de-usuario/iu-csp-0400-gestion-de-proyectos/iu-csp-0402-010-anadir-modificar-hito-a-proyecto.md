# Hércules : IU\-CSP\-0402\-010 \- Añadir\-modificar hito a proyecto



## Formulario Añadir/modificar hito

Formulario que permitirá añadir o modificar, durante el proceso de creación o modificación de un proyecto, un hito al proyecto.



| ***Vista en modo "Añadir" SIN AVISO******Vista popup en modo "Añadir" CON AVISO******Vista popup en modo "Modificar" CON AVISO \- SIN AVISO***Se omiten por no implicar cambios funcionales ni en presentación más allá del título de la ventana, "Hito" en lugar de "Nuevo Hito" y en el texto del botón, "Aceptar" en lugar de "Añadir".***Vista popup en modo "Solo consulta" CON AVISO \- SIN AVISO***Se omiten por no implicar cambios funcionales ni en presentación más allá del título de la ventana, "Hito" en lugar de "Nuevo Hito", disponer únicamente de un botón, "Cancelar" y tener todos los campos en modo "Solo consulta".***Ejemplo de email de aviso*** | | |
| --- | --- | --- |
| Nombre | Tipo | Características / Notas |
| Formulario para añadir hitos al proyecto | | |
| Tipo de hito | Texto cortoObligatorioModificable | Tipo de hito del proyecto.Los tipos de hito disponibles serán los configurados sobre el modelo de ejecución al que se ha asociado el proyecto/contrato y que se encuentren activos en ese momento.Los tipos de hitos partirán de la tabla de configuración global al SGI ([IU\-CSP\-0046 \- Gestión de tipos de hito de proyecto](https://confluence.um.es/confluence/pages/createpage.action?spaceKey=HERCULES&title=_borrar_IU-CSP-0046+-+Gesti%C3%B3n+de+tipos+de+hito+de+proyecto&linkCreation=true&fromPageId=597853368 "/confluence/pages/createpage.action?spaceKey=HERCULES&title=_borrar_IU-CSP-0046+-+Gesti%C3%B3n+de+tipos+de+hito+de+proyecto&linkCreation=true&fromPageId=597853368")). |
| Fecha y hora | Fecha \+ HoraObligatorioModificable | Calendario para marcar el día y hora al que se vincula el hito. Podrá ser una fecha a pasado o a futuro.Se expresará en formato fecha \+ hora. La hora se inicializará por defecto a las 00:00:00\.Si se cambia el valor de este campo estando aún los cambios del hito sin guardar y ya se había marcado el check "Generar aviso", pueden ocurrir dos cosas:1. La nueva fecha y hora es a futuro. En este caso, al cambiar la fecha u hora del hito, se restablecerán todos los campos del aviso a sus valores por defecto. 2. La nueva fecha y hora es a pasado. En este caso, se desmarcará automáticamente el check "Generar aviso" limpiando todos los datos que se pudiesen haber introducido relativos al mismo.  Si se cambia el valor de este campo, estando ya los cambios del hito guardados, y estando marcado el check "Generar aviso", no se restablecerán los datos del aviso. |
| Observaciones | Texto largoOpcionalModificable | Campo de texto libre para la introducción de observaciones sobre el hito concreto.Podrá modificarse y/o dejarse vacío.Si se modifica a posterioridad de haber marcado el check de "Generar aviso", no se volcará en el campo Contenido del comunicado, ya que, en otro caso, se perdería el texto existente previamente. |
| Generar aviso | BooleanoModificable | Indicador de generación de aviso asociado al hito que corresponderá al campo "aviso" de la tabla "hitos proyecto".Si en el campo Fecha se ha indicado una fecha ya pasada, el campo "Generar aviso" tomará el valor false, y no podrá modificarse, esto es, no podrá ni marcarse ni desmarcarse (no editable).Si la fecha del hito es posterior a la actual y, en el caso de la modificación, el aviso aún no ha sido enviado, el campo será editable, esto es, podrá marcarse o desmarcarse (según fuera su estado original).Al marcar este check, en caso de estar informado, se volcará al final del contenido por defecto del email el texto "En el hito se han indicado las siguientes observaciones: " seguido del contenido que pudiese tener el campo Observaciones. |
| ***Campos específicos del aviso*** **La obligatoriedad de estos campos aplicará en el momento que el check "Generar aviso" esté marcado.** **En la modificación, si la fecha y hora para el envío del aviso ya ha pasado, todos los campos a continuación se mostrarán en modo de solo consulta.** | | |
| Fecha y hora de envío | Fecha \+ HoraObligatorioModificable | Fecha y hora en la que se programa el envío del comunicado.En la modificación, aparecerá la fecha y hora que se hubiese indicado previamente.Mientras sea modificable, esta fecha deberá ser posterior al momento actual \+ 15 minutos, para permitir que al usuario le pueda dar tiempo a realizar los cambios que precise en el hito, el aviso o en otros apartados del proyecto, antes de Guardar los cambios en la pantalla de Proyectos, momento en el que se ya sí se registrará la programación o modificación del envío para la fecha y hora indicadas. En la modificación, la fecha y hora podrán ser modificadas por el usuario solo si el aviso aún no ha sido enviado. |
| Asunto | TextoObligatorioModificable | Asunto que tendrá el email de aviso.Se mostrará un asunto por defecto según lo definido en el apartado **Hitos de proyectos** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md") que podrá ser modificado posteriormente por el usuario.El usuario podrá modificar este dato si el aviso aún no ha sido enviado. |
| Contenido del email | Texto largoObligatorioModificable | Contenido o cuerpo del email de aviso.Se mostrará un contenido por defecto según lo definido en el apartado **Hitos de proyectos** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md"), que podrá ser modificado posteriormente por el usuario.El usuario podrá modificar este dato si el aviso aún no ha sido enviado. |
| Destinatarios | Componente a medidaObligatorioModificable | Lista de destinatarios del email adicionales a los que añadirá el check "Añadir IPs proyecto" si se marca.Se mostrarán unos destinatarios por defecto según lo definido en el apartado **Hitos de proyectos** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md") que podrán, según el caso, ser modificados posteriormente por el usuario.El comportamiento y uso de este componente se describe en detalle en [IU\-COM\-0010 \- Generación de comunicados \- Gestión de destinatarios](https://confluence.um.es/confluence/pages/viewpage.action?pageId=121673628#IUCOM0010Generacióndecomunicados-destinatarios "https://confluence.um.es/confluence/pages/viewpage.action?pageId=121673628#IUCOM0010Generacióndecomunicados-destinatarios").El usuario podrá modificar los destinatarios si el aviso aún no ha sido enviado. |
| Añadir IPs proyecto | BooleanoModificable | Indicador de si se quiere añadir a los IPs del proyecto como destinatarios del email de aviso.Estos destinatarios no se mostrarán ni se guardarán en el campo "Destinatarios" ya que se resolverán en el día y hora en el que se haya programado el envío del aviso.El usuario podrá modificar este dato si el aviso aún no ha sido enviado. |



| Acciones | Descripción | Enlace CU. | Permisos |
| --- | --- | --- | --- |
| Añadir/Aceptar | El botón se muestra como:* Añadir, cuando se accede al formulario para añadir un nuevo hito al proyecto. * Aceptar, cuando se accede al formulario para modificar los datos de un hito ya añadido al proyecto.  No se muestra en el caso de estar accediendo a la pantalla en modo de "Solo consulta" por condiciones de permisos o de definición funcional. | En el alta, se crea un nuevo registro en la tabla "hitos proyecto", tomando como valores los recogidos en el formulario.En la modificación, se modificarán los datos de dicho registro existente previamente, tomando como valores los recogidos en el formulario.En el alta, en caso de haberse marcado el flag "Generar aviso":* Los campos específicos del aviso serán utilizados para generar un aviso y una tarea programada para su envío en los módulos de comunicados [COM \- Módulo de Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/index.md") y tareas programadas [SGI \- TP](/hercules/sgi-sistema-de-gestion-de-investigacion/diseno/componentes/sgi-tp/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/diseno/componentes/sgi-tp/index.md") respectivamente según se detalla en el apartado **Hitos de proyecto** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md") y en [CU\-COM\-0020 \- Generar comunicado programado](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/com-casos-de-uso/cu-com-0020-generar-comunicado-programado.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/com-casos-de-uso/cu-com-0020-generar-comunicado-programado.md"). * Se creará un nuevo registro en la tabla "proyecto hito aviso" para almacenar el valor del check "Añadir IPs proyecto" y las referencias al comunicado y tarea programada generados en el punto anterior.  En la modificación, se dan 3 posibles escenarios:* Si se marca el flag "Generar aviso", sin que previamente hubiese estado marcado: * + Los campos específicos del aviso serán utilizados para generar un aviso y una tarea programada para su envío en los módulos de comunicados [COM \- Módulo de Comunicados](https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024 "https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024") y tareas programadas [SGI \- TP](https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP "https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP") respectivamente según se detalla en el apartado **Hitos de proyecto** de la página [CSP \- Comunicados](https://confluence.um.es/confluence/display/HERCULES/CSP+-+Comunicados "https://confluence.um.es/confluence/display/HERCULES/CSP+-+Comunicados") y en [CU\-COM\-0020 \- Generar comunicado programado](https://confluence.um.es/confluence/display/HERCULES/CU-COM-0020+-+Generar+comunicado+programado "https://confluence.um.es/confluence/display/HERCULES/CU-COM-0020+-+Generar+comunicado+programado"). 	+ Se creará un nuevo registro en la tabla "proyecto hito aviso" para almacenar el valor del check "Añadir IPs proyecto" y las referencias al comunicado y tarea programada generados en el punto anterior. * Si el campo "Generar aviso" estaba ya marcado y se desmarca: * + Se debe eliminar tanto el comunicado asociado al hito en el módulo de comunicados [COM \- Módulo de Comunicados](https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024 "https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024") como la tarea programada en el módulo de tareas programadas [SGI \- TP](https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP "https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP"). 	+ Se eliminará además el registro correspondiente que referencie a ese comunicado y tarea programada en la tabla "proyecto hito aviso". * Si el campo "Generar aviso" estaba ya marcado y se modifican los datos del aviso: * + Los campos específicos del aviso serán utilizados para actualizar, según el caso, el comunicado asociado al hito en el módulo de comunicados [COM \- Módulo de Comunicados](https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024 "https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024") como la tarea programada en el módulo de tareas programadas [SGI \- TP](https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP "https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP") referenciados ambos en la tabla "proyecto hito aviso" del hito. | CSP\-PRO\-ECSP\-PRO\-E\_UO |
| Cancelar | Retorna al formulario de listado de hitos del proyecto, sin salvar los posibles cambios. |  |  |




