# Hércules : IU\-CSP\-0402\-009 \- Añadir\-modificar fase a proyecto



## Formulario Añadir/modificar fase

Formulario que permitirá añadir o modificar, durante el proceso de creación o modificación de un proyecto, una fase al proyecto.



| ***Vista de popup de alta de Fase SIN AVISO******Detalle de popup de alta de Fase CON AVISO******Zoom de popup de alta de Fase CON SEGUNDO AVISO******Vista popup en modo "Modificar" CON AVISO \- SIN AVISO***Se omiten por no implicar cambios funcionales ni en presentación más allá del título de la ventana, "Fase" en lugar de "Nueva Fase" y en el texto del botón, "Aceptar" en lugar de "Añadir".***Vista popup en modo "Solo consulta" CON AVISO \- SIN AVISO***Se omiten por no implicar cambios funcionales ni en presentación más allá del título de la ventana, "Fase" en lugar de "Nueva Fase", disponer únicamente de un botón, "Cancelar" y tener todos los campos en modo "Solo consulta".***Ejemplo de email de primer aviso******Ejemplo de email de segundo aviso*** | | |
| --- | --- | --- |
| Nombre | Tipo | Características / Notas |
| Formulario para añadir plazo a los proyectos | | |
| Tipo de fase | SelectorObligatorioModificable | Los tipos de fase disponibles serán los configurados sobre el modelo de ejecución al que se haya asociado al proyecto. |
| Fecha y hora de inicio | Fecha \+ HoraObligatorioModificable | Fecha y hora de inicio de la fase definida para el proyecto.Podrá darse el caso que una fase pueda recogerse en una sola fecha, en este caso se indicaría el mismo valor tanto en fecha de inicio como en fecha de fin.Podrá ser una fecha a pasado o a futuro.En el alta de fase, la hora de la fecha de inicio tomará por defecto el valor 00:00:00\.El usuario podrá modificar este campo.Si se cambia el valor de este campo estando aún los cambios sin guardar y ya se había marcado el check "Generar aviso" y/o el check "Generar segundo aviso", pueden ocurrir dos cosas:1. La nueva fecha y hora es a futuro. En este caso, al cambiar la fecha u hora de la fase, se restablecerán todos los campos tanto del primer como, en su caso, del segundo aviso a sus valores por defecto. 2. La nueva fecha y hora es a pasado. En este caso, se desmarcarán automáticamente los check "Generar aviso" y, en su caso, "Generar segundo aviso", limpiando todos los datos que se pudiesen haber introducido relativos a los mismos.  Si se cambia el valor de este campo, estando ya los cambios del hito guardados, y estando marcado el check "Generar aviso", no se restablecerán los datos de los avisos. |
| Fecha y hora de fin | Fecha \+ HoraObligatorioModificable | Fecha y hora de fin de la fase definida para el proyecto.Podrá darse el caso que una fase pueda recogerse en una sola fecha, en este caso se indicaría el mismo valor tanto en fecha de inicio como en fecha de fin.En el alta de fase, la hora de la fecha de fin tomará por defecto el valor 23:59:59 pero podrá ser modificado.Podrá ser una fecha a pasado o a futuro.Deberá ser mayor o igual que la Fecha y hora de inicio.Si se cambia el valor de este campo estando aún los cambios sin guardar y ya se había marcado el check "Generar aviso" y/o el check "Generar segundo aviso", pueden ocurrir dos cosas:1. La nueva fecha y hora es a futuro. En este caso, al cambiar la fecha u hora de la fase, se restablecerán todos los campos tanto del primer como, en su caso, del segundo aviso a sus valores por defecto. 2. La nueva fecha y hora es a pasado. En este caso, se desmarcarán automáticamente los check "Generar aviso" y, en su caso, "Generar segundo aviso", limpiando todos los datos que se pudiesen haber introducido relativos a los mismos.  Si se cambia el valor de este campo, estando ya los cambios del hito guardados, y estando marcado el check "Generar aviso", no se restablecerán los datos de los avisos. |
| Observaciones | Texto largoOpcionalModificable | Texto libre para añadir cualquier observación sobre la fase.Si se modifica a posterioridad de haber marcado el check de "Generar aviso" y/o el de "Generar segundo aviso", no se volcará en el campo Contenido de ninguno de los dos comunicados, ya que, en otro caso, se perderían los textos existentes previamente. |
| Generar aviso | BooleanoOpcionalModificable | Indicará que se quiere enviar un aviso para la fase.Si en el campo Fecha y hora de inicio de la fase y/o en el campo Fecha y hora de fin de la fase se han indicado fechas ya pasadas, el campo "Generar aviso" tomará el valor false, y no podrá activarse (no editable). En consecuencia, puesto que estamos en el alta de fase, el campo "Generar segundo aviso" nunca aparecerá.Solo en el caso de que ambas fechas de la fase sean a futuro, el campo será editable.Al marcar este check, en caso de estar informado, se volcará al final del contenido por defecto del email del primer aviso el texto "En la fase se han indicado las siguientes observaciones: " seguido del contenido que pudiese tener el campo Observaciones. |
| ***Campos específicos de avisos.*** ***Se podrán configurar hasta 2 avisos, teniendo cada uno de ellos los mismos campos, pero que se pueden adaptar por parte del usuario para uno u otro de manera que puedan tener fecha, asunto, contenido y destinatarios diferentes.******La presentación de los campos del Primer Aviso y Segundo Aviso será en forma de "pestañas", habiendo una pestaña por aviso,con la operativa habitual de este tipo de componente.*** | | |
| --- | --- | --- |
| ***Campos específicos del primer aviso.*** **La obligatoriedad de estos campos aplicará en el momento que el check "Generar aviso" esté marcado.** | | |
| Generar segundo aviso | BooleanoOpcionalModificable | Indicará que se quiere enviar un segundo aviso para la fase.Si en el check "Generar aviso" se ha marcado, aparecerá visible por pantalla. En otro caso, no aparecerá.Si la fecha de fin de la fase es posterior a la actual y, en el caso de la modificación, el segundo aviso aún no ha sido enviado, el campo será editable.Al marcar este check, en caso de estar informado, se volcará al final del contenido por defecto del email del segundo aviso el texto "En la fase se han indicado las siguientes observaciones: " seguido del contenido que pudiese tener el campo Observaciones. |
| ***Campos comunes al primer y segundo aviso.*****Los dos avisos tendrán exactamente los mismos campos pero el usuario podría indicar valores distintos para cada uno de ellos según el aviso sea el primero o el segundo, esto es, a nivel del SGI, serán campos diferentes.** | | |
| Fecha y hora de primer/segundo envío | Fecha \+ HoraObligatorioModificable | Por defecto, aparecerá la fecha y hora de inicio de la fase para ambos envíos.Deberá ser posterior al momento actual \+ 15 minutos, para permitir que al usuario le pueda dar tiempo a realizar los cambios que precise en la fase, el aviso o en otros apartados de la convocatoria, antes de Guardar los cambios en la pantalla de Convocatoria, momento en el que se ya sí se registrará la programación del envío para la fecha y hora indicadas.En el caso del segundo aviso, deberá ser además, posterior a la fecha de envío del primer aviso.La fecha y hora podrán ser modificadas por el usuario. |
| Asunto | TextoObligatorioModificable | Asunto que tendrá el email de aviso.Se mostrará un asunto por defecto según lo definido en el apartado **Fases de proyectos** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md") que podrá ser modificado posteriormente por el usuario.El usuario podrá modificar este dato si el aviso aún no ha sido enviado. |
| Contenido del email | Texto largoObligatorioModificable | Contenido o cuerpo del email de aviso.Se mostrará un contenido por defecto según lo definido en el apartado **Fases de proyectos** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md"), que podrá ser modificado posteriormente por el usuario.El usuario podrá modificar este dato si el aviso aún no ha sido enviado. |
| Destinatarios | Componente a medidaObligatorioModificable | Lista de destinatarios del email adicionales a los que añadirá el check "Añadir IPs proyecto" si se marca.Se mostrarán unos destinatarios por defecto según lo definido en el apartado **Fases de proyectos** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md") que podrán, según el caso, ser modificados posteriormente por el usuario.El comportamiento y uso de este componente se describe en detalle en[IU\-COM\-0010 \- Generación de comunicados \- Gestión de destinatarios](https://confluence.um.es/confluence/pages/createpage.action?spaceKey=HERCULES&title=IU-COM-0010+-+Generaci%C3%B3n+de+comunicados&linkCreation=true&fromPageId=597853357 "/confluence/pages/createpage.action?spaceKey=HERCULES&title=IU-COM-0010+-+Generaci%C3%B3n+de+comunicados&linkCreation=true&fromPageId=597853357").El usuario podrá modificar los destinatarios si el aviso aún no ha sido enviado. |
| Añadir IPs proyecto | BooleanoModificable | Indicador de si se quiere añadir a los IPs del proyecto como destinatarios del email de aviso.Estos destinatarios no se mostrarán ni se guardarán en el campo "Destinatarios" ya que se resolverán en el día y hora en el que se haya programado el envío del aviso.El usuario podrá modificar este dato si el aviso aún no ha sido enviado. |



| Acciones | Descripción | Enlace CU. | Permisos |
| --- | --- | --- | --- |
| Añadir/Aceptar | El botón se muestra como:* Añadir, cuando se accede al formulario para añadir una nueva fase al proyecto. * Aceptar, cuando se accede al formulario para modificar los datos de una fase ya añadida al proyecto. | En el alta, se crea un nuevo registro en la tabla "Proyecto fase", tomando como valores los recogidos en el formulario.En la modificación, se modificarán los datos de dicho registro existente previamente, tomando como valores los recogidos en el formulario.Se comprobará siempre que la Fecha y hora de inicio de la fase sea menor o igual que fecha y hora de fin de la fase además de que la fecha y hora de inicio del aviso sea mayor que la fecha y hora de fin del mismo tanto para el primer aviso como para el segundo.Además, la fecha y hora del segundo aviso ha de ser mayor que la del primero.En el alta, en caso de haberse marcado el flag "Generar aviso":* + Los campos específicos del primer aviso serán utilizados para generar un aviso y una tarea programada para su envío en los módulos de comunicados [COM \- Módulo de Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/index.md") y tareas programadas [SGI \- TP](/hercules/sgi-sistema-de-gestion-de-investigacion/diseno/componentes/sgi-tp/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/diseno/componentes/sgi-tp/index.md") respectivamente según se detalla en el apartado **Fases de proyectos** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md") y en [CU\-COM\-0020 \- Generar comunicado programado](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/com-casos-de-uso/cu-com-0020-generar-comunicado-programado.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/com-casos-de-uso/cu-com-0020-generar-comunicado-programado.md"). 	+ Se creará un nuevo registro en la tabla "proyecto fase aviso" para almacenar los valores del check "Añadir IPs proyecto" y las referencias al comunicado y tarea programada generados en el punto anterior. 	+ En caso de haberse marcado, además del flag "Generar aviso", el flag "Generar segundo aviso": 		- * Los campos específicos del aviso serán utilizados para generar un aviso y una tarea programada para su envío con los datos de ese segundo aviso en los módulos de comunicados [COM \- Módulo de Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/index.md") y tareas programadas [SGI \- TP](/hercules/sgi-sistema-de-gestion-de-investigacion/diseno/componentes/sgi-tp/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/diseno/componentes/sgi-tp/index.md") respectivamente según se detalla en el apartado **Fases de proyectos** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md") y en [CU\-COM\-0020 \- Generar comunicado programado](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/com-casos-de-uso/cu-com-0020-generar-comunicado-programado.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/com-casos-de-uso/cu-com-0020-generar-comunicado-programado.md"). 			* Se creará un nuevo registro en la tabla "proyecto fase aviso" para almacenar el valor del check "Añadir IPs proyecto" de ese segundo aviso y las referencias al comunicado y tarea programada generados para él en el punto anterior.  En la modificación, se dan 3 posibles escenarios:* + Si se marca el flag "Generar aviso", sin que previamente hubiese estado marcado: 		- * Los campos específicos del primer aviso serán utilizados para generar un aviso y una tarea programada para su envío en los módulos de comunicados [COM \- Módulo de Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/index.md") y tareas programadas [SGI \- TP](/hercules/sgi-sistema-de-gestion-de-investigacion/diseno/componentes/sgi-tp/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/diseno/componentes/sgi-tp/index.md") respectivamente según se detalla en el apartado **Fases de proyectos** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md") y en [CU\-COM\-0020 \- Generar comunicado programado](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/com-casos-de-uso/cu-com-0020-generar-comunicado-programado.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/com-casos-de-uso/cu-com-0020-generar-comunicado-programado.md"). 			* Se creará un nuevo registro en la tabla "proyecto fase aviso" para almacenar los valores del check "Añadir IPs proyecto" y las referencias al comunicado y tarea programada generados en el punto anterior. 			* Si se marca además del flag "Generar aviso", el flag "Generar segundo aviso": 				+ - Los campos específicos del aviso serán utilizados para generar un aviso y una tarea programada para su envío con los datos de ese segundo aviso en los módulos de comunicados [COM \- Módulo de Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/index.md") y tareas programadas [SGI \- TP](/hercules/sgi-sistema-de-gestion-de-investigacion/diseno/componentes/sgi-tp/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/diseno/componentes/sgi-tp/index.md") respectivamente según se detalla en el apartado **Fases de proyectos** de la página [CSP \- Comunicados](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/csp-modulo-de-convocatorias-ayudas-solicitudes-proyectos-y-contratos-y-grupos-de-investigacion/csp-comunicados/index.md") y en [CU\-COM\-0020 \- Generar comunicado programado](/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/com-casos-de-uso/cu-com-0020-generar-comunicado-programado.md "/hercules/sgi-sistema-de-gestion-de-investigacion/requisitos-y-analisis-funcional/analisis-funcional-sgi-hercules/gen-aspectos-generales/com-modulo-de-comunicados/com-casos-de-uso/cu-com-0020-generar-comunicado-programado.md"). 					- Se creará un nuevo registro en la tabla "proyecto fase aviso" para almacenar los valores del check "Añadir IPs proyecto" de ese segundo aviso y las referencias al comunicado y tarea programada generados para él en el punto anterior. 	+ Si el campo "Generar aviso" estaba ya marcado y se desmarca: 		- * Se debe eliminar tanto el primer comunicado asociado a la fase en el módulo de comunicados [COM \- Módulo de Comunicados](https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024 "https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024") como la tarea programada de ese primer comunicado en el módulo de tareas programadas [SGI \- TP](https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP "https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP"). 			* Si además estaba marcado el check "Generar segundo aviso", se hará la misma operativa que en el punto anterior para este segundo aviso. 			* Se eliminarán además el/los registros correspondiente/s que referencie/n a ese/esos comunicado/s y tarea/s programada/s en la tabla "proyecto fase aviso". 	+ Si el campo "Generar aviso" estaba ya marcado y se modifican los datos del aviso: 		- * Los campos específicos del primer aviso serán utilizados tanto para actualizar, según el caso, el comunicado asociado a la fase en el módulo de comunicados [COM \- Módulo de Comunicados](https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024 "https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024") como la tarea programada en el módulo de tareas programadas [SGI \- TP](https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP "https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP") referenciados ambos en la tabla "proyecto fase aviso" de la fase. 			* Si además estaba marcado el check "Generar segundo aviso", hay 2 opciones: 				+ - Los datos de este segundo aviso también se modifican, se hará la misma operativa que en el punto anterior de modificación de los datos del primer aviso para este segundo aviso. 					- Si el campo "Generar segundo aviso" se desmarca: 						* Se debe eliminar tanto el segundo comunicado asociado a la fase en el módulo de comunicados [COM \- Módulo de Comunicados](https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024 "https://confluence.um.es/confluence/pages/viewpage.action?pageId=85636024") como la tarea programada de ese segundo comunicado en el módulo de tareas programadas [SGI \- TP](https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP "https://confluence.um.es/confluence/display/HERCULES/SGI+-+TP"). 						* Se eliminará además el registro correspondiente que referencie a ese comunicado y tarea programada en la tabla "proyecto fase aviso". | CSP\-PRO\-ECSP\-PRO\-E\_UO |
| Cancelar | Retorna al formulario de listado de fases del proyecto, sin salvar los posibles cambios. |  |  |




